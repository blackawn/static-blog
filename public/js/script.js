"use strict";function getThemeToggle(){const e=document.getElementById("themeColorCheckbox");return e.checked="dark"===localStorage.theme,e}function changeThemeToggle(){const e=getThemeToggle();e.addEventListener("input",()=>{localStorage.setItem("theme",e.checked?"dark":"light"),localStorage.setItem("lastToggleThemeTime",String(Date.now())),setThemeStyle()})}function getFloatMenuToggle(){const e=document.getElementById("floatMenuCheckbox");return e.checked="close"!==localStorage.floatMenuStatus,e}function changeFloatMenuToggle(){const e=getFloatMenuToggle();e.addEventListener("input",()=>{localStorage.setItem("floatMenuStatus",e.checked?"open":"close")})}function setNavHoverEffect(){const o=document.querySelector(".nav-bar-x"),n=document.querySelectorAll(".nav-item");let r=1,s=0,a=[0];const e=o=>{n.forEach((e,t)=>{s+=Number(n[t].getBoundingClientRect().width.toFixed(2)),a.push(Number(s.toFixed(2))),o(e,t)})};e((e,t)=>{e.addEventListener("mouseover",()=>{o.querySelector(".nav-bar-cover").classList.contains("hover-bg")||o.querySelector(".nav-bar-cover").classList.add("hover-bg"),o.style.clipPath=`polygon(0 0, 0 100%, ${a[t+1]}px 100%, ${a[t+1]}px 0)`,o.querySelector(".nav-bar-cover").style.clipPath=`polygon(100% 0, 100% 100%, ${a[t]}px 100%, ${a[t]}px 0)`,t>r?(o.classList.add("backward"),o.classList.remove("forward")):t<r&&(o.classList.add("forward"),o.classList.remove("backward")),r=t})}),window.addEventListener("resize",()=>{s=a.length=0,a.push(0),e(()=>null)})}function setScrollProgress(){const o=document.querySelector(".x"),n=document.querySelector(".scroll-progress");function e(){var e=o.offsetHeight-document.body.clientHeight,t=Math.abs(o.getBoundingClientRect().top);n.style.setProperty("--scroll-progress",parseInt(100-(e-t)/e*100)/100),n.textContent=100<=100-parseInt((e-t)/e*100)?"100%":`${100-parseInt((e-t)/e*100)}%`}e(),document.getElementById("root").addEventListener("scroll",e)}function setPostRewardEffect(){const n=document.querySelector(".post-reward-wrap"),e=document.querySelectorAll(".post-reward-button"),r=document.querySelector(".post-reward-x");if(0<e.length&&r){let o;e.forEach((e,t)=>{e.addEventListener("click",()=>r.classList.contains(`side${t+1}`)?(r.classList.remove(`side${t+1}`),void n.classList.remove("transform-will-change")):(n.classList.add("transform-will-change"),r.classList.remove(o),r.classList.add(`side${t+1}`),void(o=`side${t+1}`)))})}}function setCodeBlockCopy(){const e=document.querySelectorAll(".copy-code-block");0<e.length&&"true"==basicConfig.isCopyCode&&e.forEach(e=>{e.addEventListener("click",()=>{creatCopyToClipboard(e.parentElement.querySelector("code").textContent)&&(e.disabled=!0,e.classList.remove("hover:text-cyan-600","dark:hover:text-cyan-600"),e.classList.add("cursor-not-allowed"),setTimeout(()=>{e.classList.add("hover:text-cyan-600","dark:hover:text-cyan-600"),e.classList.remove("cursor-not-allowed"),e.disabled=!1},5e3))})})}function loadPostComment(){const n=document.getElementById("loadCommentButton");n&&n.addEventListener("click",()=>{var e,t,o;n.classList.add("disabled:opacity-50"),n.disabled=!0,n.textContent=basicConfig.livere.loadText,n.classList.add("scale"),e=document,t="script",o=e.getElementsByTagName(t)[0],"function"!=typeof LivereTower&&((t=e.createElement(t)).src=basicConfig.livere.src,t.async=!0,o.parentNode.insertBefore(t,o)),setTimeout(()=>n.remove(),1e3)})}function creatCopyToClipboard(t){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){let e=document.createElement("textarea");e.textContent=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{return document.execCommand("copy")}catch(e){return console.warn("Copy to clipboard failed.",e),!1}finally{document.body.removeChild(e)}}}function loadMiniMasonry(){const e=document.querySelectorAll(".post-card-item-wrap");0<e.length&&e.forEach((e,t)=>{e.setAttribute("data-minimasonry",`miniMasonry${t}`),new MiniMasonry({container:`[data-minimasonry=miniMasonry${t}]`,gutter:14,surroundingGutter:!1,ultimateGutter:14})})}function creatMediumZoom(){const e=document.querySelectorAll(".image-x img");if(0<e.length){new mediumZoom(e,{margin:24});const n=new IntersectionObserver(e=>{const o=e[0];o.isIntersecting&&(null!=o.target.getAttribute("src")&&""!==o.target.getAttribute("src")||(o.target.setAttribute("src",o.target.getAttribute("data-src")),new Promise((e,t)=>{o.target.onload=()=>e(o.target),o.target.onerror=()=>t(o.target),n.unobserve(o.target)}).then(e=>{e.classList.contains("min-h-[8rem]")&&e.classList.remove("min-h-[8rem]"),e.previousElementSibling&&e.previousElementSibling.remove()}).catch(e=>{e.previousElementSibling.classList.add("loading-error"),e.classList.add("invisible")})))});e.forEach(e=>{n.observe(e)})}}function loadPageSuccessEffect(e){0<e.length&&e.forEach(o=>{const n=new IntersectionObserver(e=>{const t=e[0];t.isIntersecting&&t.target.classList.contains("translate-y-8")&&t.target.classList.contains("opacity-0")&&(t.target.classList.add("observer-target-will-change"),t.target.classList.remove("translate-y-8","opacity-0"),1===o.length?n.disconnect():n.unobserve(o),setTimeout(()=>t.target.classList.remove("observer-target-will-change"),1e3))});n.observe(o)})}document.addEventListener("DOMContentLoaded",()=>{loadMiniMasonry(),creatMediumZoom(),loadPageSuccessEffect(document.querySelectorAll(".observer-target"))}),window.addEventListener("storage",()=>{setThemeStyle(),getThemeToggle(),getFloatMenuToggle()}),changeThemeToggle(),changeFloatMenuToggle(),setNavHoverEffect(),setScrollProgress(),setPostRewardEffect(),setCodeBlockCopy(),loadPostComment();